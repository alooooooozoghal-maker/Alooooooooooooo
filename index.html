<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ùˆ Ø°ØºØ§Ù„ | Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#050505">
    <link rel="icon" href="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css');
        :root { --fire: #ff4d00; --gold: #e2b04a; --bg: #050505; --dark-card: rgba(20, 20, 20, 0.9); }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Vazirmatn', sans-serif; }

        body {
            background: var(--bg); color: #fff; min-height: 100vh;
            background-image: radial-gradient(circle at 50% 0%, #3a1100 0%, #050505 80%);
            display: flex; flex-direction: column; align-items: center; padding: 20px;
        }

        /* Ticker Ads */
        .ticker-wrap {
            width: 100%; overflow: hidden; background: rgba(226, 176, 74, 0.1);
            border: 1px solid var(--gold); border-radius: 10px; margin-bottom: 20px; padding: 10px;
        }
        .ticker { display: inline-block; white-space: nowrap; animation: marquee 15s linear infinite; color: var(--gold); }
        @keyframes marquee { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* Stories */
        .stories-container {
            display: flex; gap: 15px; overflow-x: auto; width: 100%; max-width: 450px;
            padding: 10px 0; scrollbar-width: none;
        }
        .story { min-width: 80px; text-align: center; cursor: pointer; }
        .story-ring {
            width: 70px; height: 70px; border-radius: 50%; padding: 3px;
            background: linear-gradient(45deg, #f09433, #e2b04a, #ff4d00);
            display: flex; align-items: center; justify-content: center;
        }
        .story img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid #000; object-fit: cover; }
        .story span { font-size: 10px; display: block; margin-top: 5px; color: #ccc; }

        /* Header */
        .header { text-align: center; margin-bottom: 30px; }
        .logo-circle {
            width: 120px; height: 120px; border-radius: 50%;
            border: 3px solid var(--gold); box-shadow: 0 0 20px rgba(226, 176, 74, 0.5);
            margin-bottom: 15px;
        }
        .brand-row { display: flex; align-items: center; justify-content: center; gap: 15px; }
        .fire { font-size: 30px; animation: flicker 1.5s infinite alternate; }
        @keyframes flicker {
            0% { transform: scale(1); opacity: 0.8; filter: drop-shadow(0 0 5px red); }
            100% { transform: scale(1.2); opacity: 1; filter: drop-shadow(0 0 15px orange); }
        }
        .brand-name { font-size: 32px; font-weight: 900; color: var(--gold); }

        /* Order Card */
        .card {
            width: 100%; max-width: 400px; background: var(--dark-card);
            border-radius: 25px; border: 1px solid rgba(255,255,255,0.1);
            padding: 25px; backdrop-filter: blur(10px);
        }
        .input-group { margin-bottom: 15px; text-align: right; }
        label { display: block; margin-bottom: 8px; font-size: 13px; color: #aaa; }
        input, textarea {
            width: 100%; padding: 12px; background: #000; border: 1px solid #333;
            border-radius: 12px; color: #fff; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--gold); }

        .qty-control {
            display: flex; align-items: center; justify-content: space-between;
            background: #111; padding: 10px; border-radius: 15px; margin: 15px 0;
        }
        .qty-btn {
            width: 40px; height: 40px; border-radius: 10px; border: none;
            background: var(--gold); color: #000; font-size: 20px; cursor: pointer;
        }

        .btn {
            width: 100%; padding: 15px; border-radius: 15px; border: none;
            font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px;
        }
        .btn-order { background: linear-gradient(90deg, #ff4d00, #e2b04a); color: #000; }
        .btn-tg { background: #0088cc; color: #fff; }
        .btn-wa { background: #25D366; color: #fff; }

        /* PWA Banner */
        #installBanner {
            position: fixed; bottom: 20px; background: #222; border: 1px solid var(--gold);
            padding: 15px; border-radius: 15px; display: none; z-index: 1000; width: 90%; max-width: 350px;
        }

        .challenge-box {
            background: rgba(255, 77, 0, 0.1); border: 1px dashed var(--fire);
            padding: 15px; border-radius: 15px; text-align: center; margin: 20px 0;
            text-decoration: none; display: block; color: #fff;
        }

        footer { text-align: center; margin-top: 40px; color: #666; font-size: 12px; line-height: 2; }
    </style>
</head>
<body>

    <div class="ticker-wrap"><div class="ticker" id="tickerText">Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ğŸ”¥ Ù…Ø±ØºÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ÛŒ Ø¯Ø± Ø§ÛŒØ°Ù‡</div></div>

    <div class="stories-container" id="storiesWrapper">
        </div>

    <div class="header">
        <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="logo-circle">
        <div class="brand-row">
            <span class="fire">ğŸ”¥</span>
            <h1 class="brand-name">Ø§Ù„Ùˆ Ø°ØºØ§Ù„</h1>
            <span class="fire">ğŸ”¥</span>
        </div>
        <p style="color: var(--gold); margin-top: 5px;">Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ Ø³Ø±ÛŒØ¹ Ø°ØºØ§Ù„</p>
    </div>

    <div class="card" id="mainForm">
        <div class="input-group">
            <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label>
            <input type="text" id="name" placeholder="Ù…Ø«Ù„Ø§: Ø¹Ù„ÛŒ Ù†Ø§Ø¯Ø±ÛŒØ§Ù†" oninput="checkAdmin(this.value)">
        </div>
        <div class="input-group">
            <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</label>
            <input type="tel" id="phone" placeholder="0916...">
        </div>
        <div class="input-group">
            <label>Ø¢Ø¯Ø±Ø³ Ø¯Ù‚ÛŒÙ‚:</label>
            <textarea id="address" rows="2"></textarea>
        </div>
        <button class="btn" style="background: #333; color: #ccc;" onclick="getLocation()">ğŸ“ Ø«Ø¨Øª Ù„ÙˆÚ©ÛŒØ´Ù† (GPS)</button>

        <div class="qty-control">
            <span>Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ÛŒ (Û¶Ûµ,Û°Û°Û° Øª)</span>
            <div style="display: flex; align-items: center; gap: 15px;">
                <button class="qty-btn" onclick="changeQty(-1)">-</button>
                <span id="qty">1</span>
                <button class="qty-btn" onclick="changeQty(1)">+</button>
            </div>
        </div>

        <div id="totalPrice" style="text-align: center; margin: 15px 0; color: var(--gold); font-weight: bold;">
            Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª: Û¶Ûµ,Û°Û°Û° ØªÙˆÙ…Ø§Ù†
        </div>

        <button class="btn btn-order" onclick="showInvoice()">ğŸ›’ Ø«Ø¨Øª Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ±</button>
    </div>

    <div class="card" id="invoice" style="display: none;">
        <h3 style="text-align: center; color: var(--gold);">ÙØ§Ú©ØªÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ</h3>
        <hr style="opacity: 0.1; margin: 15px 0;">
        <div id="invoiceDetails" style="line-height: 2; font-size: 14px;"></div>
        <button class="btn btn-tg" id="tgBtn" onclick="sendToTelegram()">âœˆï¸ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… (Ø«Ø¨Øª Ø¢Ù†ÛŒ)</button>
        <button class="btn btn-wa" onclick="sendToWhatsApp()">ğŸ“± Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÙˆØ§ØªØ³Ø§Ù¾</button>
        <button class="btn" style="background: #555;" onclick="resetForm()">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø³ÙØ§Ø±Ø´</button>
    </div>

    <a href="https://aloozoghal-hash.github.io/-Mir-mir-/" class="challenge-box">
        ğŸ Ú†Ø§Ù„Ø´ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø±Ùˆ Ø¨Ø¨Ø± Û³ Ú©ÛŒØ³Ù‡ Ø°ØºØ§Ù„ Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ú¯ÛŒØ±
    </a>

    <footer>
        <p>Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø§Ø² Ø¯Ù„ Ø§ÛŒØ°Ù‡ Ø¨Ø±Ø§ÛŒ Ø³ÙØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ØµÙØ§ÛŒ Ø´Ù…Ø§.<br>Ù‡Ø¯Ù Ù…Ø§ Ø±Ø³Ø§Ù†Ø¯Ù† Ù…Ø±ØºÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ø¯Ø± Ú©Ù…ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ø§Ø³Øª.</p>
        <p>ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª | Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ°Ù‡</p>
    </footer>

    <div id="installBanner">
        <div style="display: flex; align-items: center; gap: 10px;">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" width="40" style="border-radius: 5px;">
            <div style="flex: 1; font-size: 12px;">Ù†ØµØ¨ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹</div>
            <button onclick="installPWA()" style="background: var(--gold); border: none; padding: 5px 10px; border-radius: 5px;">Ù†ØµØ¨</button>
        </div>
    </div>

    <div id="adminModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:2000; padding:20px; overflow-y:auto;">
        <h2 style="color:var(--gold)">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ú¯Ù‡ÛŒ</h2>
        <input type="text" id="adTitle" placeholder="Ù†Ø§Ù… Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±" style="margin-top:10px;">
        <input type="text" id="adDesc" placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡">
        <input type="text" id="adImg" placeholder="Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³ (Ù…Ø³ØªÙ‚ÛŒÙ…)">
        <input type="text" id="adPhone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø¢Ú¯Ù‡ÛŒ Ø¯Ù‡Ù†Ø¯Ù‡">
        <input type="text" id="tickerMsg" placeholder="Ù…ØªÙ† Ú©Ø§Ø¯Ø± Ù…ØªØ­Ø±Ú© Ø¨Ø§Ù„Ø§ÛŒ Ø³Ø§ÛŒØª">
        <button class="btn btn-order" onclick="generateJson()">Ø³Ø§Ø®Øª Ú©Ø¯ JSON</button>
        <textarea id="jsonOutput" rows="5" style="margin-top:10px; font-size:10px;" readonly></textarea>
        <p style="font-size:10px; color:#666;">Ú©Ø¯ Ø¨Ø§Ù„Ø§ Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ø± ÙØ§ÛŒÙ„ ads.json Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.</p>
        <button class="btn" onclick="document.getElementById('adminModal').style.display='none'">Ø¨Ø³ØªÙ†</button>
    </div>

    <script>
        let count = 1;
        let gpsLocation = "";
        const GOOGLE_BRIDGE_URL = "https://script.google.com/macros/s/AKfycbyLQjEqmjs5Re2m7nf3lGU_IZQU0ILuFgiJWxrEQ306AgUy1zW090quuwv1QLWVOQyV/exec";
        
        // Load Ads
        async function loadAds() {
            try {
                const response = await fetch('ads.json');
                const data = await response.json();
                if(data.ticker) document.getElementById('tickerText').innerText = data.ticker;
                const wrapper = document.getElementById('storiesWrapper');
                data.ads.forEach(ad => {
                    wrapper.innerHTML += `
                        <div class="story" onclick="alert('${ad.desc}\\nØªÙ…Ø§Ø³: ${ad.phone}')">
                            <div class="story-ring"><img src="${ad.img}"></div>
                            <span>${ad.title}</span>
                        </div>`;
                });
            } catch (e) { console.log("Ads not found"); }
        }

        function changeQty(v) {
            count = Math.max(1, count + v);
            document.getElementById('qty').innerText = count;
            document.getElementById('totalPrice').innerText = `Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª: ${(count * 65000).toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(p => {
                    gpsLocation = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                    alert("âœ… Ù„ÙˆÚ©ÛŒØ´Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯.");
                });
            }
        }

        function checkAdmin(val) {
            if(val === "Ø¹Ù„ÛŒ Ù†Ø§Ø¯Ø±ÛŒØ§Ù† 1362541") {
                document.getElementById('adminModal').style.display = 'block';
            }
        }

        function generateJson() {
            const newAd = {
                ticker: document.getElementById('tickerMsg').value,
                ads: [{
                    title: document.getElementById('adTitle').value,
                    desc: document.getElementById('adDesc').value,
                    img: document.getElementById('adImg').value,
                    phone: document.getElementById('adPhone').value
                }]
            };
            document.getElementById('jsonOutput').value = JSON.stringify(newAd, null, 2);
        }

        function showInvoice() {
            const name = document.getElementById('name').value;
            if(!name) return alert("Ù†Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");
            const total = count * 65000;
            window.finalMsg = `ğŸ›ï¸ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ Ø§Ø² Ø³Ø§ÛŒØª\nğŸ‘¤ Ù†Ø§Ù…: ${name}\nğŸ“ ØªÙ…Ø§Ø³: ${document.getElementById('phone').value}\nğŸ“¦ ØªØ¹Ø¯Ø§Ø¯: ${count} Ú©ÛŒØ³Ù‡ Ø°ØºØ§Ù„\nğŸ’° Ù…Ø¨Ù„Øº: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†\nğŸ  Ø¢Ø¯Ø±Ø³: ${document.getElementById('address').value}\nğŸ“ Ù„ÙˆÚ©ÛŒØ´Ù†: ${gpsLocation}`;
            
            document.getElementById('invoiceDetails').innerHTML = window.finalMsg.replace(/\n/g, '<br>');
            document.getElementById('mainForm').style.display = 'none';
            document.getElementById('invoice').style.display = 'block';
        }

        async function sendToTelegram() {
            const btn = document.getElementById('tgBtn'); 
            btn.disabled = true; 
            btn.innerText = "â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø³ÛŒØ³ØªÙ…ÛŒ...";
            try {
                await fetch(GOOGLE_BRIDGE_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: window.finalMsg })
                });
                alert("âœ… Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯! Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ú¯Ø±Ø¯ÛŒØ¯.");
                resetForm();
            } catch (e) { alert("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„."); }
            finally { btn.disabled = false; btn.innerText = "âœˆï¸ Ø«Ø¨Øª Ø¢Ù†ÛŒ Ùˆ Ø³Ø±ÛŒØ¹"; }
        }

        function sendToWhatsApp() {
            const url = `https://wa.me/989220730628?text=${encodeURIComponent(window.finalMsg)}`;
            window.open(url);
        }

        function resetForm() {
            document.getElementById('mainForm').style.display = 'block';
            document.getElementById('invoice').style.display = 'none';
            count = 1; changeQty(0);
        }

        // PWA Logic
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            if(!localStorage.getItem('pwaInstalled')) {
                document.getElementById('installBanner').style.display = 'block';
            }
        });

        function installPWA() {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choice) => {
                if (choice.outcome === 'accepted') {
                    localStorage.setItem('pwaInstalled', 'true');
                    document.getElementById('installBanner').style.display = 'none';
                }
            });
        }

        window.onload = loadAds;
    </script>
</body>
</html>
