<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ùˆ Ø°ØºØ§Ù„ | Ø§ÛŒØ°Ù‡</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#050505">
    <link rel="icon" href="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css');
        :root { --fire: #ff4d00; --gold: #e2b04a; --bg: #050505; --glass: rgba(255, 255, 255, 0.05); }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Vazirmatn', sans-serif; }

        body {
            background: var(--bg); color: #fff; min-height: 100vh;
            background-image: radial-gradient(circle at 50% 0%, #3a1100 0%, #050505 80%);
            display: flex; flex-direction: column; align-items: center; padding: 10px;
        }

        /* ØªÛŒÚ©Ø± ØªØ¨Ù„ÛŒØºØ§ØªÛŒ Ø¯Ú©Ù…Ù‡â€ŒØ¯Ø§Ø± */
        .ticker-container {
            width: 100%; background: #000; border: 1px solid var(--gold);
            border-radius: 15px; overflow: hidden; margin-bottom: 15px; position: relative; padding: 10px 0;
        }
        .ticker-content { display: flex; align-items: center; white-space: nowrap; animation: marquee 15s linear infinite; }
        .ticker-item { display: flex; align-items: center; gap: 10px; margin-right: 50px; }
        .ticker-btn { background: var(--gold); color: #000; padding: 2px 10px; border-radius: 5px; font-size: 11px; text-decoration: none; font-weight: bold; }
        @keyframes marquee { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* Ø¨Ø®Ø´ Ù‡Ø§ÛŒÙ„Ø§ÛŒØªâ€ŒÙ‡Ø§ */
        .highlights-section { width: 100%; max-width: 450px; margin-bottom: 20px; }
        .discount-label { 
            background: var(--fire); color: #fff; font-size: 10px; padding: 3px 10px; 
            border-radius: 5px 5px 0 0; display: inline-block; margin-right: 10px;
            animation: pulse 1s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        .highlights-box { 
            background: var(--glass); border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 15px; padding: 15px 10px; display: flex; gap: 15px; overflow-x: auto; scrollbar-width: none;
        }

        /* Ù„ÙˆÚ¯Ùˆ Ùˆ Ø¨Ø±Ù†Ø¯ */
        .logo-box { text-align: center; margin: 15px 0; }
        .main-logo { width: 90px; height: 90px; border-radius: 50%; border: 2px solid var(--gold); box-shadow: 0 0 20px var(--fire); }
        .fire-anim { font-size: 24px; animation: flicker 0.5s infinite alternate; }
        @keyframes flicker { from { opacity: 0.7; transform: scale(1); } to { opacity: 1; transform: scale(1.1); } }

        /* ÙØ±Ù… Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
        .card { width: 100%; max-width: 400px; background: var(--glass); backdrop-filter: blur(15px); border-radius: 25px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); }
        input, textarea { width: 100%; padding: 12px; margin-top: 5px; background: rgba(0,0,0,0.5); border: 1px solid #333; border-radius: 10px; color: #fff; }
        .btn { width: 100%; padding: 15px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; }
        .btn-gold { background: linear-gradient(135deg, var(--gold), #b8860b); color: #000; }
        .btn-share { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid var(--gold); margin-top: 20px; font-size: 13px; }

        /* Ø§Ø³ØªÙˆØ±ÛŒ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…ÛŒ */
        #story-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; flex-direction: column; }
        .story-header { position: absolute; top: 10px; width: 100%; padding: 0 10px; z-index: 11; }
        .progress-bar { display: flex; gap: 4px; height: 2px; width: 100%; }
        .progress-bg { flex: 1; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0; background: #fff; }
        .story-img { width: 100%; height: 100%; object-fit: cover; }
        .story-footer { position: absolute; bottom: 0; width: 100%; padding: 40px 20px; background: linear-gradient(transparent, #000); text-align: center; }

        /* Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª */
        #adminPanel { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #111; z-index: 20000; padding: 20px; overflow-y: auto; color: #fff; }
        .admin-item { background: #222; padding: 10px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #444; }
    </style>
</head>
<body>

    <div class="ticker-container" id="tickerWrap" style="display: none;">
        <div class="ticker-content" id="tickerItems"></div>
    </div>

    <div class="highlights-section" id="highlightsWrap" style="display: none;">
        <div class="discount-label">ØªÙˆÛŒ Ø§ÛŒØ°Ù‡ Ú©ÛŒ ØªØ®ÙÛŒÙ Ú¯Ø°Ø§Ø´ØªÙ‡ØŸ ğŸ‘‡</div>
        <div class="highlights-box" id="highlightsList"></div>
    </div>

    <div class="logo-box">
        <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="main-logo">
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
            <span class="fire-anim">ğŸ”¥</span>
            <h1 style="color: var(--gold);">Ø§Ù„Ùˆ Ø°ØºØ§Ù„</h1>
            <span class="fire-anim">ğŸ”¥</span>
        </div>
        <p style="font-size: 12px; color: #aaa;">Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ Ø³Ø±ÛŒØ¹ Ø°ØºØ§Ù„ Ø¯Ø± Ø§ÛŒØ°Ù‡</p>
    </div>

    <div class="card" id="orderForm">
        <input type="text" id="cName" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" oninput="adminCheck(this.value)">
        <input type="tel" id="cPhone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
        <textarea id="cAddr" rows="2" placeholder="Ø¢Ø¯Ø±Ø³ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„"></textarea>
        <button class="btn" style="background:#222; color:#ccc;" onclick="getGPS()">ğŸ“ Ø«Ø¨Øª Ù„ÙˆÚ©ÛŒØ´Ù† (GPS)</button>
        
        <div style="display:flex; justify-content:space-between; align-items:center; margin-top:15px; background:#000; padding:10px; border-radius:12px;">
            <span style="font-size:13px;">Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ÛŒ (Û¶Ûµ,Û°Û°Û° Øª)</span>
            <div style="display:flex; align-items:center; gap:15px;">
                <button onclick="changeQ(-1)" style="width:30px; height:30px; background:var(--gold); border:none; border-radius:5px;">-</button>
                <b id="qty">1</b>
                <button onclick="changeQ(1)" style="width:30px; height:30px; background:var(--gold); border:none; border-radius:5px;">+</button>
            </div>
        </div>

        <button class="btn btn-gold" onclick="makeInvoice()">ğŸ›’ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ± Ùˆ Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ</button>

        <button class="btn btn-share" onclick="shareSite()">ğŸ’¥ Ø§Ù„ÙˆØ°ØºØ§Ù„ Ø±Ùˆ Ø¨ÙØ±Ø³Øª Ø¨Ø±Ø§ Ø¯ÙˆØ³ØªØª ğŸš€</button>
    </div>

    <div class="card" id="invoiceCard" style="display: none;">
        <h3 style="text-align: center; color: var(--gold);">ğŸ“‘ Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´</h3>
        <p id="invText" style="font-size: 13px; line-height: 2; margin: 15px 0; white-space: pre-wrap;"></p>
        <button class="btn btn-gold" id="tgBtn" onclick="sendTG()">ğŸš€ Ø«Ø¨Øª Ø¢Ù†ÛŒ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…</button>
        <button class="btn" style="background:#ff9800; color:#fff;" onclick="sendSMS()">ğŸ“© Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú© Ø¨Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª</button>
        <button class="btn" style="background:#25D366; color:#fff;" onclick="sendWA()">ğŸŸ¢ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø± ÙˆØ§ØªØ³Ø§Ù¾</button>
        <button class="btn" style="background:#444;" onclick="location.reload()">Ø§ØµÙ„Ø§Ø­ Ø³ÙØ§Ø±Ø´</button>
    </div>

    <div id="story-overlay">
        <div class="story-header"><div class="progress-bar" id="pBar"></div></div>
        <span onclick="closeS()" style="position:absolute; top:25px; right:20px; font-size:35px; z-index:12;">Ã—</span>
        <img id="sImg" class="story-img">
        <div class="story-footer">
            <h2 id="sTitle" style="color:var(--gold)"></h2>
            <p id="sDesc" style="margin:10px 0; font-size:13px;"></p>
            <a id="sCall" class="btn btn-gold" style="display:inline-flex; width:auto; padding:10px 30px;">ğŸ“ ØªÙ…Ø§Ø³ Ù…Ø³ØªÙ‚ÛŒÙ…</a>
        </div>
    </div>

    <div id="adminPanel">
        <h3>ğŸ›  Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØªÙˆØ§ (Ø§Ø³ØªÙˆØ±ÛŒØŒ Ù‡Ø§ÛŒÙ„Ø§ÛŒØªØŒ ØªÛŒÚ©Ø±)</h3>
        <div id="adminItemsList"></div>
        <button class="btn btn-gold" onclick="addNewItem()">â• Ø§ÙØ²ÙˆØ¯Ù† ØªØ¨Ù„ÛŒØº Ø¬Ø¯ÛŒØ¯</button>
        <hr style="margin:20px 0; opacity:0.2;">
        <button class="btn" style="background:var(--fire);" onclick="exportJSON()">ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª Ø®Ø±ÙˆØ¬ÛŒ Ù†Ù‡Ø§ÛŒÛŒ (JSON)</button>
        <textarea id="outputJson" rows="5" style="margin-top:10px; font-size:10px;" readonly></textarea>
        <button class="btn" onclick="location.reload()">Ø®Ø±ÙˆØ¬</button>
    </div>

    <footer style="margin-top:30px; text-align:center; font-size:11px; color:#666; padding:20px;">
        <p>Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø§ÛŒØ°Ù‡ - Ù…Ø±ØºÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ø¯Ø± Ú©Ù…ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù†</p>
        <p>Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ°Ù‡</p>
    </footer>

    <script>
        let q = 1, gps = "", db = { ads: [] };
        let curIdx = 0, sTimer;

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        async function loadDB() {
            try {
                const res = await fetch('ads.json');
                const data = await res.json();
                db = data;
                renderUI();
            } catch(e) { console.log("DB Empty"); }
        }

        function renderUI() {
            const tList = document.getElementById('tickerItems');
            const hList = document.getElementById('highlightsList');
            
            if(db.ads.length > 0) {
                document.getElementById('tickerWrap').style.display = 'block';
                document.getElementById('highlightsWrap').style.display = 'block';
            }

            db.ads.forEach((ad, i) => {
                // ØªÛŒÚ©Ø±
                tList.innerHTML += `
                    <div class="ticker-item">
                        <span>${ad.tickerText}</span>
                        <a href="tel:${ad.phone}" class="ticker-btn">ğŸ“ ØªÙ…Ø§Ø³</a>
                        ${ad.link ? `<a href="${ad.link}" class="ticker-btn" style="background:#0088cc; color:#fff;">ğŸ”— Ù„ÛŒÙ†Ú©</a>` : ''}
                    </div>`;
                // Ù‡Ø§ÛŒÙ„Ø§ÛŒØª
                hList.innerHTML += `
                    <div onclick="openS(${i})" style="min-width:70px; text-align:center; cursor:pointer;">
                        <div style="width:65px; height:65px; border-radius:50%; border:2px solid var(--gold); padding:2px;">
                            <img src="${ad.img}" style="width:100%; height:100%; border-radius:50%; object-fit:cover;">
                        </div>
                        <span style="font-size:10px; display:block; margin-top:5px;">${ad.title}</span>
                    </div>`;
            });
        }

        // Ø§Ø³ØªÙˆØ±ÛŒ
        function openS(i) {
            curIdx = i;
            document.getElementById('story-overlay').style.display = 'flex';
            runS();
        }

        function runS() {
            clearInterval(sTimer);
            const ad = db.ads[curIdx];
            document.getElementById('sImg').src = ad.img;
            document.getElementById('sTitle').innerText = ad.title;
            document.getElementById('sDesc').innerText = ad.desc;
            document.getElementById('sCall').href = `tel:${ad.phone}`;

            const pBar = document.getElementById('pBar');
            pBar.innerHTML = db.ads.map((_, i) => `<div class="progress-bg"><div class="progress-fill" id="f-${i}" style="width:${i < curIdx ? '100%' : '0'}"></div></div>`).join('');
            
            let w = 0;
            sTimer = setInterval(() => {
                w++;
                document.getElementById(`f-${curIdx}`).style.width = w + '%';
                if(w >= 100) {
                    clearInterval(sTimer);
                    if(curIdx < db.ads.length -1) { curIdx++; runS(); } else { closeS(); }
                }
            }, 100);
        }

        function closeS() { clearInterval(sTimer); document.getElementById('story-overlay').style.display='none'; }

        // ØªÙˆØ§Ø¨Ø¹ Ø®Ø±ÛŒØ¯
        function changeQ(v) { q = Math.max(1, q+v); document.getElementById('qty').innerText = q; }
        function getGPS() { if(navigator.geolocation) navigator.geolocation.getCurrentPosition(p => { gps=`https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`; alert("âœ… Ù„ÙˆÚ©ÛŒØ´Ù† Ø«Ø¨Øª Ø´Ø¯"); }); }

        function makeInvoice() {
            const name = document.getElementById('cName').value;
            if(!name || !document.getElementById('cPhone').value) return alert("ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");
            window.msg = `ğŸ›ï¸ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ Ø§Ù„Ùˆ Ø°ØºØ§Ù„\nğŸ‘¤ Ù†Ø§Ù…: ${name}\nğŸ“ ØªÙ…Ø§Ø³: ${document.getElementById('cPhone').value}\nğŸ“¦ Ù…Ù‚Ø¯Ø§Ø±: ${q} Ú©ÛŒØ³Ù‡\nğŸ’° Ù…Ø¨Ù„Øº: ${(q*65000).toLocaleString()} Øª\nğŸ  Ø¢Ø¯Ø±Ø³: ${document.getElementById('cAddr').value}\nğŸ“ Ù„ÙˆÚ©ÛŒØ´Ù†: ${gps}`;
            document.getElementById('invText').innerText = window.msg;
            document.getElementById('orderForm').style.display='none';
            document.getElementById('invoiceCard').style.display='block';
        }

        async function sendTG() {
            const btn = document.getElementById('tgBtn'); btn.innerText = "â³ Ø§Ø±Ø³Ø§Ù„...";
            await fetch("https://script.google.com/macros/s/AKfycbyLQjEqmjs5Re2m7nf3lGU_IZQU0ILuFgiJWxrEQ306AgUy1zW090quuwv1QLWVOQyV/exec", {method:'POST', mode:'no-cors', body: JSON.stringify({message: window.msg})});
            alert("âœ… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!"); location.reload();
        }

        function sendSMS() { window.location.href=`sms:09220730628?body=${encodeURIComponent(window.msg)}`; }
        function sendWA() { window.open(`https://wa.me/989220730628?text=${encodeURIComponent(window.msg)}`); }

        function shareSite() {
            if (navigator.share) {
                navigator.share({ title: 'Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø§ÛŒØ°Ù‡', text: 'Ø°ØºØ§Ù„ Ø¯Ø§Øº Ùˆ Ø¨Ø§Ú©ÛŒÙÛŒØª Ø±Ùˆ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´ Ø¨Ø¯Ù‡!', url: window.location.href });
            } else { alert("Ù„ÛŒÙ†Ú© Ø³Ø§ÛŒØª Ø±Ø§ Ú©Ù¾ÛŒ Ùˆ Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ³ØªØ§Ù†ØªØ§Ù† Ø¨ÙØ±Ø³ØªÛŒØ¯."); }
        }

        // Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
        function adminCheck(v) { if(v === "Ø¹Ù„ÛŒ Ù†Ø§Ø¯Ø±ÛŒØ§Ù† 1362541") document.getElementById('adminPanel').style.display='block'; }
        
        function addNewItem() {
            const div = document.createElement('div');
            div.className = 'admin-item';
            div.innerHTML = `
                <input type="text" placeholder="Ø§Ø³Ù… Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø± (Ø¨Ø±Ø§ÛŒ Ù‡Ø§ÛŒÙ„Ø§ÛŒØª)" class="a-title">
                <input type="text" placeholder="Ù…ØªÙ† ØªÛŒÚ©Ø± Ù…ØªØ­Ø±Ú©" class="a-ticker">
                <input type="text" placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡ Ø§Ø³ØªÙˆØ±ÛŒ" class="a-desc">
                <input type="text" placeholder="Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³ Ù…Ø³ØªÙ‚ÛŒÙ…" class="a-img">
                <input type="text" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³" class="a-phone">
                <input type="text" placeholder="Ù„ÛŒÙ†Ú© Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" class="a-link">
            `;
            document.getElementById('adminItemsList').appendChild(div);
        }

        function exportJSON() {
            const items = document.querySelectorAll('.admin-item');
            const newAds = Array.from(items).map(i => ({
                title: i.querySelector('.a-title').value,
                tickerText: i.querySelector('.a-ticker').value,
                desc: i.querySelector('.a-desc').value,
                img: i.querySelector('.a-img').value,
                phone: i.querySelector('.a-phone').value,
                link: i.querySelector('.a-link').value
            }));
            document.getElementById('outputJson').value = JSON.stringify({ ads: newAds }, null, 2);
        }

        window.onload = loadDB;
    </script>
</body>
</html>
